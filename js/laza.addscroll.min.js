!function(t,e,o,n){"use strict";t.fn.addScroll=function(i){return i=t.extend({},t.fn.addScroll.defaults,i),this.each(function(){var a,r,s,l,c,u,d,p,h,f,g,v,m,T,b,y,M=t(this),w="_las_"+Math.floor(1e4*Math.random()),E=M.parent(),D=0,O=function(t){return D=t.touches&&t.touches.length>0?t.touches[0].clientY:typeof t.clientY!==UNDEF?t.clientY:D},C=function(){d=M.height(),p=E.height()},U=function(){return M.position().top},_=function(t){return Math.round((l.height()-6)*-(null==t?U():t)/d)+3},H=function(){return Math.max(Math.round((l.height()-6)*p/d),i.dragMinSize)},I=function(t){return t.preventDefault(),!1},A=function(t){"function"==typeof E.loadImages&&(typeof t!==UNDEF?E.loadImages({top:t}):E.loadImages())},N=function(t){return t.preventDefault(),c.css({top:Math.minMax(2,Math.round(O(t.originalEvent)-c.data("my")),l.height()-c.height()-2)}),V(),!1},k=function(){e.off("mousemove._h"+w+" mouseup._h"+w),n.off("pointermove._h"+w+" pointerup._h"+w),c.off(TOUCH.MOVE+"._h"+w+" "+TOUCH.END+"._h"+w)},S=function(t){return t.preventDefault(),k(),!1},x=function(o){return"mousedown"===o.type&&1!==o.which?!0:(o.preventDefault(),M.hideAllTooltips(),t(this).data("my",Math.round(O(o.originalEvent))-c.position().top),"mousedown"===o.type?e.on("mousemove._h"+w,N).on("mouseup._h"+w,S):"pointerdown"===o.type?n.on("pointermove._h"+w,N).on("pointerup._h"+w,S):c.on(TOUCH.MOVE+"._h"+w,N).on(TOUCH.END+"._h"+w,S),!1)},K=function(t){null==t&&(t=U()),r.css({opacity:t?1:i.disabledOpacity}),s.css({opacity:t===p-d?i.disabledOpacity:1})},F=function(){var t=d,e=p;C(),E.scrollTop()&&(M.css({top:-E.scrollTop()}),E.scrollTop(0)),(t!==d||e!==p)&&(p>=d?(M.css({top:0}).off("selectstart."+w),u.hide()):(M.position().top<p-d&&M.css({top:p-d}),c.css({top:_(),height:H()}),M.on("selectstart."+w,I),u.show(),K()),A())},V=function(){M.css({top:Math.minMax(p-d,-Math.round((c.position().top-3)*d/(l.height()-6)),0)}),K(),A()},z=function(t){clearInterval(h),p>=d||(t=Math.minMax(p-d,Math.round(t),0),c.stop(!0,!1).animate({top:_(t)},i.speed,i.effect),M.stop(!0,!1).animate({top:t},i.speed,i.effect,function(){K(t)}),A(t))},R=function(){b+=Math.round(T/20);var t=m+b;return t>0||y>t?(clearInterval(h),void A()):(M.css({top:t}),c.css({top:_(),height:H()}),T*=.8,void(Math.abs(T)<10&&(T=0,clearInterval(h),A())))},Y=function(t){if(g){var e=O(t.originalEvent)-g;e&&(M.data("scrolling",!0),M.css({top:Math.minMax(y,f+e,0)}),c.css({top:_(),height:H()}))}else g=O(t.originalEvent);return!1},$=function(){e.off("mousemove."+w+" mouseup."+w),n.off("pointermove."+w+" pointerup."+w),M.off(TOUCH.MOVE+"."+w+" "+TOUCH.END+"."+w)},j=function(e){M.removeClass("scrolling"),$(),m=U();var o=("mouseup"===e.type?O(e.originalEvent):D)-g,n=(new Date).getTime()-v;if(Math.abs(o)<5||20>n){M.data("scrolling",!1);var i=t(e.target).closest("a");return i.length&&(i.attr("href")?i[0].click():i.trigger("click")),!0}return e.preventDefault(),T=1e3*o/n,h=setInterval(R,50),setTimeout(function(){M.data("scrolling",!1)},30),A(),!1},P=function(o){if("mousedown"===o.type&&1!==o.which)return!0;var a=o.target.nodeName;return"INPUT"===a||"TEXTAREA"===a||"BUTTON"===a||"SELECT"===a?!0:i.dontDrag&&(t(o.target).is(i.dontDrag).length||t(o.target).parents(i.dontDrag).length)?!0:M.data("scrolling")?(j(o),!0):o.target.scrollHeight-1>o.target.clientHeight?!0:p>=d||"touchstart"===o.type&&(!o.originalEvent.touches||o.originalEvent.touches.length>1||M.is(":animated"))?!0:($(),t(o.target).closest("[data-tooltip-id]").trigger("removetooltip"),M.data("scrolling",!0),c.stop(!0,!0),M.stop(!0,!0),clearInterval(h),f=U(),g=O(o.originalEvent),v=(new Date).getTime(),b=0,y=p-d,M.hideAllTooltips(),M.addClass("scrolling"),"mousedown"===o.type?e.on("mousemove."+w,Y).on("mouseup."+w,j):"pointerdown"===o.type?n.on("pointermove."+w,Y).on("pointerup."+w,j):M.on(TOUCH.MOVE+"."+w,Y).on(TOUCH.END+"."+w,j),!1)},W=function(){M.css({position:"absolute",width:E.width-20}),E.css({overflow:"hidden"}),"absolute"!==E.css("position")&&E.css({position:"relative"}),r=t("<div>",{"class":i.upbtn}).appendTo(E),s=t("<div>",{"class":i.dnbtn}).appendTo(E),l=t("<div>",{"class":i.scbar}).appendTo(E),c=t("<div>").appendTo(l),u=r.add(s).add(l),u.hide(),u.on("selectstart."+w,I),r.on("click."+w,function(){return M.hideAllTooltips(),z(U()+p),!1}),s.on("click."+w,function(){return M.hideAllTooltips(),z(U()-p),!1}),l.on("click."+w,function(t){M.hideAllTooltips();var e=O(t.originalEvent);return e<c.offset().top?z(U()+p):e>c.offset().top+c.height()&&z(U()-p),!1}),c.attr("draggable","true").on(TOUCH.START+"."+w+" dragstart."+w+" mousedown."+w,x)},B=function(){if(!M.data("scrolling")){var e=t(this).parent()===M?t(this):t(this).parent(),o=e.position().top,n=e.outerHeight(!0),i=M.position().top,a=E.height();if(!(a>M.height())){if(o+n>a-i)i=Math.max(a-n-o,a-M.height());else{if(!(-i>o))return;i=-o}z(i)}}},L=function(t){return M.data("scrolling")?(t.preventDefault(),!1):!0};W(),M.on("click."+w,"a",L),M.css("touch-action","none").data("scrolling",!1).attr({draggable:!0,"data-custom-scroll":!0,"data-role":"scroll"}).on(TOUCH.START+"."+w+" dragstart."+w+" mousedown."+w,P),o.on("resize."+w,function(){clearTimeout(a),a=setTimeout(F,50)}),a=setTimeout(F,10),M.on("adjust",F),i.refresh&&setInterval(function(){t("[data-role=gallery]").is(":visible")||F()},i.refresh),i.focusActive&&M.find("a").on("setactive",B),i.enableMouseWheel&&M.on("mousewheel."+w,function(t,e){return e&&(clearTimeout(h),c.stop(!0,!0),M.stop(!0,!0),z(U()+i.wheelIncr*(0>e?-1:1))),!1}),(t.isFunction(i.enableKeyboard)||i.enableKeyboard)&&e.on("keydown."+w,function(e){if(document.activeElement&&"INPUT"===document.activeElement.nodeName||t.isFunction(i.enableKeyboard)&&!i.enableKeyboard())return!0;var o=e?e.keyCode:window.event.keyCode;switch(o){case 33:return e.preventDefault(),z(U()+p),!1;case 34:return e.preventDefault(),z(U()-p),!1}return!0})})},t.fn.addScroll.defaults={upbtn:"scrup",dnbtn:"scrdn",scbar:"scrbar",dragMinSize:10,speed:300,effect:"swing",disabledOpacity:.3,wheelIncr:50,enableKeyboard:!0,enableMouseWheel:!0,focusActive:!0,refresh:0}}(jQuery,$(document),$(window),$("body"));