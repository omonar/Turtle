var fixFbComments=function(e){var t=window.location.href;-1===t.indexOf("?fb_")?(t=t.split("#")[0],e&&"/"===t[t.length-1]&&(t+=e)):t=t.split("?")[0],document.getElementById("fb-comments").setAttribute("data-href",t)},initMobile=function(){if(!(!/Mobile/.test(navigator.userAgent)||screen.width>980||screen.height>980||window.innerWidth!==document.documentElement.clientWidth&&window.innerWidth-1!==document.documentElement.clientWidth)){var e=function(){return Object.prototype.hasOwnProperty.call(window,"pageYOffset")&&window.scrollTo(0,window.pageYOffset+1),!0};setTimeout(function(){e()},1e3),$(window).on("orientationchange",e)}};!function(e,t,a,n){"use strict";e.fn.readData=function(t,a){if(null==t||null==a)return this;var n,i,o=(a=a.split(",")).length;return this.each(function(){for(n=0;n<o;n++)null!=(i=e(this).data(a[n]))&&(t[a[n]]=i)})},e.fn.showin=function(){return this.each(function(){e(this).css("display","inline-block")})},e.fn.togglein=function(t){return typeof t===UNDEF?this.each(function(){e(this).css("display","none"===e(this).css("display")?"inline-block":"none")}):(e(this).css("display",t?"inline-block":"none"),this)},e.fn.getDim=function(){var t=e(this).eq(0),a={width:t.width(),height:t.height()};if((0===a.width||0===a.height)&&"none"===t.css("display")){var n=t.css("position"),i=t.css("left");t.css({position:"absolute",left:"-10000px",display:"block"}),a.width=t.width(),a.height=t.height(),t.css({display:"none",position:n,left:i})}return a},typeof Search!==UNDEF&&(Search.text=getTranslations({searchBoxTip:"Search...",searchResultsFor:"Search results for",newImages:"New images",notFound:"Not found",foundNImages:"Found {0} item(s)",close:"Close"}),Search.start=function(t){if(null!=t){var a,i,o,s,l,r,d,c,h,u,p,f,m,g,b,v,w,k,T,y="string"==typeof t||e.isNumeric(t)?String(t):"FORM"===t.nodeName?e(t).find("input[type=search]").val().trim():e(t).text().trim(),x=0,S=!1;if(Search.data&&e.isArray(Search.data)&&Search.data.length&&y&&!(y.length<2)){a=e("<div>",{'class':"searchresults"});var I=function(e){if(e&&e.length){var t=e.val().trim();t.length>=2&&Search.start(t)}};y.startsWith("@new")?(S=!0,s=Search.created||Math.floor((new Date).getTime()/864e5),o=parseInt(y.split(":")[1],10)||30):(T=new RegExp("("+y.replace(/\s/g,"|")+")","i"),a.append('<form><input type="text" value="'+y+'"><a class="button">&nbsp;</a></form>'),a.find(".button").on("click",function(t){return I(e(this).siblings("input")),!1}),a.find("input").on("keydown",function(t){if(13===t.which)return t.preventDefault(),I(e(t.currentTarget)),!1})),m=Search.rootPath&&"."!==Search.rootPath?Search.rootPath+"/":"",r=window.location.href.getRelpath(Math.floor(m.length/3));var O=function(t){var a=e(t.target).closest("a");return a.length&&a.hasClass("active")&&window.location.href.endsWith(a.attr("href"))?(t.cancelBubble=!0,!1):(Search.makeSlides||(a.addClass("active"),a.siblings(".active").removeClass("active")),e.cookie("lastSearch",y,8),!0)};for(d=0;d<Search.data.length;d++)for(f=m,Search.data[d][0].length&&(f+=(Search.urlEncode?Search.data[d][0]:encodeURIComponent(Search.data[d][0]).replace(/%2F/g,"/"))+"/"),u=Search.data[d][1].length,c=0;c<u;c++)if(g=Search.data[d][1][c].split(Search.sep),S&&g.length>5&&(l=s-parseInt(g[5],10))<o||!S&&T.test(Search.data[d][1][c])){switch(b=g[0].split(":"),k=b[0].getExt(),w=b.length>1?b[1]:b[0].substring(b[0].lastIndexOf(".")+1),v=encodeURIComponent(b[0]),l<0&&(l=0),k.toLowerCase()){case Search.ext:b=f+Search.folderThumb;break;case"tif":case"bmp":Search.makeSlides||(v=v.replaceExt(w));case"jpg":case"jpeg":case"png":case"mp4":b=f+Search.thumbs+"/"+v.replaceExt(w);break;case"mp3":b="png"===w?m+"res/audio.png":f+Search.thumbs+"/"+v.replaceExt(w);break;case"gif":v=v.replaceExt(w),b=f+Search.thumbs+"/"+v;break;case"pdf":case"zip":case"txt":case"doc":case"xls":b=m+"res/"+k+".png";break;default:b=m+"res/unknown.png"}for(k===Search.ext?(v=f+v,b=f+Search.folderThumb):v=f+(Search.makeSlides?Search.slides+"/"+v.replaceExt(Search.ext):Search.indexName+"#"+(Search.urlEncode?v.replace(/\'/g,"%27").replace(/%/g,"%25").replace(/\(/g,"%2528").replace(/\)/g,"%2529"):v)),p=e("<a>",{href:v.fixUrl()}).append(e("<aside>").append(e("<img>",{src:b}))).on("click",O).appendTo(a),v.endsWith(r)&&p.addClass("active"),g[1]&&p.append(e("<h5>").append(S?g[1]:g[1].replace(T,"<em>$1</em>"))),g[2]&&g[2]!==g[1]&&p.append(e("<p>").append(S?g[2].trunc(192):g[2].trunc(192).replace(T,"<em>$1</em>"))),h=3;h<g.length-1;h++)g[h]&&g[h].trim().length&&p.append(e("<p>").append(S?g[h].trunc(192):g[h].trunc(192).replace(T,"<em>$1</em>")));S&&p.append(e("<p>").append("<em>"+getRelativeDate(l)+"</em>")),window.location.hash===g[0]&&(i=x),x++}return t.jquery&&e(t).parents(".hint:first").fadeOut(100,function(){e(this).remove()}),x?(a.children("a:first").before(e("<p>",{text:Search.text.foundNImages.template(x)})),setTimeout(function(){e(".searchresults > a").eq(i||0).focus()},250)):a.append(e("<p>",{text:Search.text.notFound})),n.addModal(a,{uid:"searchres",title:y.startsWith("@new")?Search.text.newImages:Search.text.searchBoxTip,darkenBackground:!1,movable:!0,blocking:!1,closeOnClickOut:!1,defaultButton:"close",resizable:!0,width:240,pos:[2,0],scrollIntoView:!0,savePosition:!0}),!1}}},Search.rootPath="",Search.init=function(t){Search.rootPath=t;var a=e.cookie("lastSearch");a&&a.length&&"null"!==a&&(e.cookie("lastSearch",null),Search.start(a))}),e.fn.addRegions=function(t,a,n){if(t&&t.length&&a){n=e.extend({},e.fn.addRegions.defaults,n);var i=[];return function(){var e,t,n,o,s,l,r=a.split("::");for(e=0;e<r.length;e++)(t=r[e].split(";")).length>4&&t[0].length&&null!==(n=parseFloat(t[1]))&&null!==(o=parseFloat(t[2]))&&null!==(s=parseFloat(t[3]))&&null!==(l=parseFloat(t[4]))&&i.push([t[0],100*n+"%",100*o+"%",100*s+"%",100*l+"%"])}(),i.length?this.each(function(){for(var a,o,s=e(this),l=parseInt(s.css("padding-top"),10),r=e("<div>",{'class':n.id}).hide(),d=e("<div>",{'class':n.id+"-cont"}).css({left:l,top:l,right:l,bottom:l}),c=function(e){return e.preventDefault(),Search.start(e.target),!1},h=function(t){d.children("a").eq(e(t.target).index()).addClass(n.active)},u=function(t){d.children("a").eq(e(t.target).index()).removeClass(n.active)},p=0;p<i.length;p++)a=e("<a>",{text:i[p][0]}).appendTo(r),o=e("<a>").css({left:i[p][1],top:i[p][2],width:i[p][3],height:i[p][4]}).append(e("<span>",{text:i[p][0]})).appendTo(d),a.on({mouseover:h,mouseout:u}),typeof Search!==UNDEF&&o.on("click",c);s.addTooltip(r,{touchToggle:!0,stay:5e3}),s.on("destroy",function(){r.remove()}),s.hasClass(n.active)&&d.addClass(n.active),s.on("click",function(){e(this).add(d).toggleClass(n.active)}),t.append(d)}):this}},e.fn.addRegions.defaults={id:"regions",active:"active",pos:[1,2,1,0]},e.fn.centerThis=function(t){return t=e.extend({},e.fn.centerThis.defaults,t),this.each(function(){var a=e(this),i=a.find(t.selector);if(i.length){var o,s,l,r,d,c,h,u,p,f,m=t.marginLeft+t.padding,g=t.marginRight+t.padding,b=t.marginTop+t.padding,v=t.marginBottom+t.padding;if(h=i.data("ow"),u=i.data("oh"),h&&u||(i.data("ow",h=i.width()),i.data("oh",u=i.height())),(p=i.data("bw"))||i.data("bw",p=parseInt(i.css("border-top-width"),10)||0),(f=i.data("pw"))||i.data("pw",f=parseInt(i.css("padding-top"),10)||0),o=(a.innerWidth()||n.width())-2*(p+f)-m-g,s=(a.innerHeight()||n.height())-2*(p+f)-b-v,t.fit&&(h>o||u>s||t.enlarge)){var w=Math.min(o/h,s/u);l=Math.round(h*w),r=Math.round(u*w)}else l=h,r=u;if(d=Math.round((o-l)/2)+m,c=Math.round((s-r)/2)+b,l!==h&&i.translateToPos(),t.animate){if(i.stop(!0,!1),t.preScale&&1!==t.preScale){var k=l*t.preScale,T=r*t.preScale;i.css({left:Math.round((o-k)/2)+m,top:Math.round((s-T)/2)+b,width:Math.round(k),height:Math.round(T)})}else t.init&&i.css({left:d,top:c});i.animate({left:d,top:c,width:l,height:r},{duration:t.speed,easing:t.effect,complete:t.complete})}else i.css({left:d,top:c,width:l,height:r}),e.isFunction(t.complete)&&t.complete.call(this)}})},e.fn.centerThis.defaults={selector:".main",speed:500,fit:!0,enlarge:!0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,padding:0,init:!1,animate:!1,effect:"swing",complete:null},e.fn.collectMarkers=function(t){t=e.extend({},e.fn.collectMarkers.defaults,t);var a,n,i,o=[];return this.each(function(s){(a=e(this).find(t.selector)).length&&(n=a.data(t.mapid))&&(n=e.getLatLng(n))&&(i=a.data(t.captionid)||a.attr("alt"),o.push({map:n,label:s+1+(i?": "+i.stripHTML():""),link:t.dynamic?e(this):e(this).attr("href")}))}),o},e.fn.collectMarkers.defaults={selector:"img:first",mapid:"map",captionid:"caption"},e.fn.markFoldersNew=function(t){t=e.extend({},e.fn.markFoldersNew.defaults,t);var a=getTranslations(e.fn.markFoldersNew.text);if(t.days){var n=t.ref||Math.round((new Date).getTime()/864e5);return this.each(function(){n-parseInt(e(this).data("modified")||0,10)<=t.days&&e(this).after('<span class="'+t.cls+'">'+a.newItem+"</span>")})}},e.fn.markFoldersNew.defaults={days:7,cls:"newlabel"},e.fn.markFoldersNew.text={newItem:"NEW"},e.fn.turtleHelp=function(a){a=e.extend({},e.fn.turtleHelp.defaults,a);var i=getTranslations(e.fn.turtleHelp.text),o=e("<div>",{'class':"help"}),s=function(t){if(i.hasOwnProperty(t)){var a,n=1,s=e("<ul>",{'class':t}).appendTo(o);for(a in i[t])s.append(e("<li><span>"+n+++"</span>"+i[t][a]+"</li>"))}},l=function(){n.addModal(o,{uid:"help",title:i.help_title,width:720,savePosition:!0,resizable:!0})};return a.index&&s("index"),a.slide&&s("slide"),a.pressF1&&o.append(e("<p>",{html:i.help_pressF1})),a.useF1&&t.on("keydown",function(t){if(document.activeElement&&"INPUT"===document.activeElement.nodeName||e.isFunction(a.enableKeyboard)&&!a.enableKeyboard()||e("#help").is(":visible"))return!0;return 112!==(t?t.keyCode:window.event.keyCode)||(t.preventDefault(),l(),!1)}),this.each(function(){e(this).on("click",function(e){return e.preventDefault(),l(),!1})})},e.fn.turtleHelp.defaults={useF1:!0,index:!0,slide:!1},e.fn.turtleHelp.text={help_title:"Using Turtle gallery",help_pressF1:"Press <b>F1</b> any time to get help!",index:{help_topNavigation:"Top <b>navigation</b> bar with <b>Home</b> button",help_upOneLevel:"<b>Up</b> one level",help_authorInfo:"Author or company <b>information</b>",help_shareAndLike:"<b>Share</b> and <b>Like</b> buttons for social networking",help_searchNew:"Search <b>new images</b>",help_search:"<b>Search</b> button",help_downloadZip:"<b>Download</b> album or current folder as ZIP file",help_startSlideshow:"Start <b>slideshow</b> <em>Numpad *</em>"},slide:{help_previousPicture:"<b>Previous</b> picture <em>Left arrow</em><em>Swipe right</em>",help_backToIndex:"Back to <b>thumbnail page</b> / up one level <em>Esc</em>",help_toggleFit:"Toggle <b>fit to screen</b> or <b>1:1</b> size <em>Numpad +</em>",help_toggleInfo:"Show/hide <b>captions</b> and other panels, like Metadata, Map, Shopping, etc. <em>Numpad -</em>",help_toggleThumbnails:"Show/hide <b>thumbnail</b> scroller <em>Numpad -</em>",help_toggleAutoPlay:"Start/stop <b>slideshow</b> <em>Numpad *</em>",help_nextPicture:"<b>Next</b> picture <em>Right arrow</em><em>Swipe left</em>",help_toggleMeta:"Toggle <b>photo data</b>",help_toggleMap:"Toggle <b>map</b>",help_toggleShop:"Toggle <b>shopping options</b> panel",help_downloadImage:"Download <b>high resolution</b> file",help_shareAndLike:"<b>Share</b> and <b>Like</b> buttons for social networking",help_toggleComments:"Toggle <b>Facebook comments</b>",help_toggleFaces:"Toggle visibility of <b>tagged people</b>"}},e.fn.turtle=function(t){t=e.extend({},e.fn.turtle.defaults,t);var i=e.fn.turtle.ids,o=getTranslations(e.fn.turtle.text),s=function(a,n,i){e.cookie(a,n,i),t[a]=n};!function(a){for(var n,i=0;i<a.length;i++)null!==(n=e.cookie(a[i]))&&(t[a[i]]=n)}(["thumbsOn","infoOn","commentsOn","metaOn","mapOn","regionsOn","shopOn","shareOn","printOn","fitImage","slideshowDelay","slideshowOn"]),e.fn.addScroll.defaults.dontDrag="#"+i.map,e.fn.addMap.defaults.zoom=t.mapZoom,e.fn.addMap.defaults.type=t.mapType,e.fn.addMap.defaults.resPath=t.resPath,e.fn.addShop.defaults.id=t.shopId,e.fn.addShop.defaults.path=(t.albumName?t.albumName+"/":"")+t.relPath,e.fn.addShop.defaults.currency=t.shopCurrency||"EUR",e.fn.addShop.defaults.handling=t.shopHandling||null,e.fn.addShop.defaults.locale=t.shopLocale||"US",e.fn.addShop.defaults.quantityCap=t.shopQuantityCap||0,e.fn.addShop.defaults.discount=t.shopDiscount||0,e.fn.addShop.defaults.options=t.shopOptions||"",e.fn.addShop.defaults.coupons=t.shopCoupons||"",e.fn.addShop.defaults.itemNameUses=t.shopItemNameUses||"fileName",t.shopContinueUrl&&(e.fn.addShop.defaults.continueUrl=t.shopContinueUrl.match(/^https?:/i)?t.shopContinueUrl:window.location.origin+t.shopContinueUrl),e.fn.addPlayer.defaults.backgroundColor=n.css("background-color").rgb2hex(),t.linkSlides||(e.fn.addPlayer.defaults.fullScreen=t.videoMaximize,e.fn.addPlayer.defaults.auto=t.videoAuto,e.fn.addPlayer.defaults.solution=t.prioritizeFlash?"flash,html":"html,flash"),e.fn.centerThis.defaults.fit=t.fitImage,e.fn.centerThis.defaults.animate=t.transitions,e.fn.centerThis.defaults.padding=t.fitPadding,e.fn.centerThis.defaults.enlarge=!t.fitShrinkonly,e.fn.centerThis.defaults.selector="."+i.main,function(t){for(var a in t)t.hasOwnProperty(a)&&(e.fn.addSocial.defaults[a]=t[a])}(t.shares),t.shareSlides=t.shares&&(t.linkSlides&&(t.shares.facebookLike||t.shares.facebook||t.shares.gplus)||t.shares.twitter||t.shares.pinterest||t.shares.digg||t.shares.delicious||t.shares.myspace||t.shares.stumbleupon||t.shares.reddit||t.shares.email);var l,r,d,c,h,u,p,f,m,g=Math.round((new Date).getTime()/864e5),b="ms"===VEND&&Modernizr&&!1===Modernizr.opacity,v={},w=null,k=null,T=0,y=null,x=null,S="index"===n.attr("id"),I="page"===n.attr("id"),O=S&&!t.linkSlides,F=[],P=!1,M=!1,C=null,N=null,D=a.width(),L=a.height(),B=-1,E=-1,z=function(a){if(d&&d.is(":visible")||document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName)||e.isFunction(t.enableKeyboard)&&!t.enableKeyboard())return!0;switch(a?a.keyCode:window.event.keyCode){case 13:case 10:O?ke():window.location.href=l.eq(T).attr("href");break;case 37:T=(T||l.length)-1,W();break;case 38:T&&t.cols&&(T=Math.max(0,T-t.cols)),W();break;case 39:T=(T+1)%l.length,W();break;case 40:T<l.length-1&&t.cols&&(T=Math.min(l.length-1,T+t.cols)),W();break;case 97:case 35:T=l.length-1,W();break;case 103:case 36:T=0,W();break;case 106:case 179:O&&t.slideshowFullScreen&&(M=!1,e("html").fullScreen(!0)),O&&ke(),ee();break;default:return!0}return!1},A=function(a){if(d.is(":hidden")||document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName)||e.isFunction(t.enableKeyboard)&&!t.enableKeyboard())return!0;switch(a?a.keyCode:window.event.keyCode){case 27:U();break;case 37:K();break;case 38:$();break;case 39:q();break;case 40:Y();break;case 97:case 35:O?ke(l.length-1):window.location.href=t.firstPage;break;case 103:case 36:O?ke(0):window.location.href=t.firstPage;break;case 106:case 179:y?te():(O&&t.slideshowFullScreen&&(M=!1,e("html").fullScreen(!0)),ee());break;case 107:pe();break;case 109:de();break;default:return!0}return!1},H=function(){(t.level>0?window:parent).location.href=t.uplink||t.indexPage||"../"},U=function(){if(O||(t.curr&&e.cookie("curr:"+t.albumName+"/"+t.relPath,t.curr,t.keepPrefs),window.location.href=t.indexPage),!t.skipIndex||t.level||t.uplink){var a,o=e("[data-role=index]");n.hideAllTooltips(),d.is(":visible")?(te(),O&&t.slideshowFullScreen&&e("html").fullScreen(!1),t.skipIndex?H():(o.length&&o.is(":hidden")&&(o.children().addBack().css({visibility:"visible",display:"block"}),r.children("."+i.cont).trigger("adjust"),setTimeout(function(){r.loadImages()},100)),t.transitions?d.fadeOut(t.speed):d.hide(),w&&(a=w.find("."+i.video+",."+i.audio)).length&&a.trigger("pause"),e("#"+i.map+">."+i.cont).trigger("adjust"),"no"!==t.hash&&e.history.load(""))):o.length&&o.is(":hidden")&&(o.children().addBack().css({visibility:"visible",display:"block"}),setTimeout(function(){r.loadImages()},100)),o.find("[data-custom-scroll]").data("scrolling",!1)}},R=function(){var e=l.eq(T).children("img:first");return e.length?(e.data(i.link)||e.data(i.src)).getFile():null},j=function(e){l.children("."+i.checkbox).toggleClass(i.active,e),d&&d.find("."+i.checkbox).toggleClass(i.active,e)},W=function(a){var n=l.eq(T);l.filter("."+i.active).removeClass(i.active),n.addClass(i.active),t.skipIndex||typeof a!==UNDEF&&!1!==a||n.trigger("setactive"),m&&(m.filter("."+i.active).removeClass(i.active),m.eq(T).addClass(i.active).trigger("setactive")),t.mapOnIndex&&e("#"+i.map+" ."+i.cont).trigger("setactive",n.find("img:first").data(i.mapid)),T&&e.cookie("curr:"+t.albumName+"/"+t.relPath,T,t.keepPrefs)},_=function(){e.cookie("curr:"+t.albumName+"/"+t.relPath,null)},q=function(){var a=e("."+i.main),n=e("."+i.img);if(a.length)if(a.position().left+a.outerWidth()<=n.width()-t.fitPadding)X();else{var o=Math.round(.8*n.width());a.animate({left:Math.max(a.position().left-o,n.width()-t.fitPadding-a.outerWidth())},t.scrollDuration)}},K=function(){var a=e("."+i.main),n=e("."+i.img);if(a.length)if(a.position().left>=t.fitPadding)V();else{var o=Math.round(.8*n.width());a.animate({left:Math.min(a.position().left+o,t.fitPadding)},t.scrollDuration)}},$=function(){var a=e("."+i.main),n=e("."+i.img);if(a.length&&!(a.position().top>t.fitPadding)){var o=Math.round(.8*n.width());a.animate({top:Math.min(a.position().top+o,t.fitPadding)},t.scrollDuration)}},Y=function(){var a=e("."+i.main),n=e("."+i.img);if(a.length&&!(a.position().top+a.outerHeight()<=n.height()-t.fitPadding)){var o=Math.round(.8*n.width());a.animate({top:Math.max(a.position().top-o,n.height()-t.fitPadding-a.outerHeight())},t.scrollDuration)}},Q=function(){w.find("."+i.main).trigger("dragcancel")},V=function(){if(te(),O)T?ke(T-1):"startover"===t.afterLast?ke(l.length-1):"nextfolder"===t.afterLast&&t.previousFoldersLast?window.location.href=t.previousFoldersLast:Q();else{var a=e("."+i.controls+" ."+i.prev);a.length&&(a=a.attr("href"))!==NOLINK?window.location.href=a:Q()}},X=function(a){var r=[];if(O){if(T<l.length-1)return a?J():te(),void ke(T+1);if("startover"===t.afterLast||y&&t.slideshowLoop)return a?J():te(),void ke(0);switch(_(),Q(),t.afterLast){case"onelevelup":t.uplink&&H();break;case"backtoindex":t.skipIndex||U();break;case"nextfolder":t.nextFoldersFirst?(null!==y&&e.cookie("slideshowDelay",t.slideshowDelay,8),window.location.href=t.nextFoldersFirst):te();break;case"ask":te(),l.length>1&&r.push({t:o.startOver,h:function(){ke(0)}}),t.uplink&&r.push({t:t.level>0?o.upOneLevel:t.homepageLinkText||o.backToHome,h:function(){H()}}),t.skipIndex||r.push({t:o.backToIndex,h:function(){U()}}),t.nextFoldersFirst&&r.push({t:o.nextFolder,h:function(){window.location.href=t.nextFoldersFirst}}),n.addModal(e("<p>",{text:o.atLastPageQuestion}),r,{type:"question",uid:"dialog",title:o.atLastPage,width:500})}Q()}else{var d=e("."+i.controls+" ."+i.next);d.length&&(d=d.attr("href"))&&d.length&&d!==NOLINK?(s("slideshowDelay",t.slideshowDelay),y&&s("slideshowOn",a,8),window.location.href=d):"ask"===t.afterLast&&(te(),Q(),_(),t.firstPage&&r.push({t:o.startOver,h:function(){y&&s("slideshowOn",null!=y,8),window.location.href=t.firstPage}}),t.uplink&&r.push({t:t.level>0?o.upOneLevel:t.homepageLinkText||o.backToHome,h:function(){H()}}),t.indexPage&&r.push({t:o.backToIndex,h:function(){window.location.href=t.indexPage}}),t.nextFoldersFirst&&r.push({t:o.nextFolder,h:function(){window.location.href=t.nextFoldersFirst}}),n.addModal(e("<p>",{text:o.atLastPageQuestion}),r,{uid:"dialog",type:"question",title:o.atLastPage,width:500}))}},Z=function(){x&&(x=clearTimeout(y),y=setTimeout(function(){X(!0)},300))},G=function(){y&&(x=y,y=clearTimeout(y))},J=function(){y&&(clearTimeout(y),y=setTimeout(function(){X(!0)},t.slideshowDelay))},ee=function(){y=clearTimeout(y);var a;v.play.hide(),v.pause.showin(),e.cookie("slideshowDelay",t.slideshowDelay,8),(a=w.find("."+i.video+",."+i.audio)).length&&(a.data("playing")||t.videoAuto)?(x=!0,a.trigger("setEndedFn",Z)):y=setTimeout(function(){X(!0)},t.slideshowDelay),t.bgAudioId&&e(t.bgAudioId).trigger("play"),ie()},te=function(){if(x=!1,v.pause.hide(),v.play.showin(),e.cookie("slideshowDelay",null),y){var a;y=clearTimeout(y),ie(),O?t.bgAudioId&&e(t.bgAudioId).trigger("pause"):s("slideshowOn",!1),(a=w.find("."+i.video+",."+i.audio)).length&&(a.data("playing")||t.videoAuto)&&a.trigger("setEndedFn",null)}},ae=!1,ne=function(){M||ae||(ae=!0,u.stop(!0,!1).fadeTo(200,.8,function(){b&&u.css("filter",null)}),C=setTimeout(function(){ie()},1500))},ie=function(){M?C=setTimeout(function(){ie()},750):(ae=!1,C=clearTimeout(C),u.fadeTo(500,t.controlOutOpacity))},oe=function(){t.infoOn&&(v.hideInfo.hide(),v.showInfo.showin(),t.transitions?p.animate({bottom:-p.outerHeight()},500,function(){p.hide()}):p.css({bottom:-p.outerHeight()}).hide(),w&&t.fitFreespace&&w.centerThis({fit:t.fitImage,marginTop:ce(),marginBottom:0}),ie(),s("infoOn",!1))},se=function(){if(!t.infoOn){v.showInfo.hide(),v.hideInfo.showin(),p.is(":hidden")&&p.show().css({bottom:-p.outerHeight()});var e=function(){p.children("."+i.map).trigger("adjust")};t.transitions?p.animate({bottom:0},500,e):(p.show().css({bottom:0}),e()),w&&t.fitFreespace&&w.centerThis({fit:t.fitImage,marginTop:ce(),marginBottom:p.outerHeight()}),ie(),s("infoOn",!0)}},le=function(){t.thumbsOn&&(v.hideThumbs.hide(),v.showThumbs.showin(),t.transitions?h.animate({top:-f.outerHeight()-10},500):h.css({top:-f.outerHeight()-10}),w&&t.fitFreespace&&w.centerThis({fit:t.fitImage,marginTop:0,marginBottom:he()}),ie(),s("thumbsOn",!1))},re=function(){t.thumbsOn||(v.showThumbs.hide(),v.hideThumbs.showin(),t.transitions?h.animate({top:0},500):h.css({top:0}),w&&t.fitFreespace&&w.centerThis({fit:t.fitImage,marginTop:f.outerHeight(),marginBottom:he()}),ie(),s("thumbsOn",!0))},de=function(){var e=t.fitFreespace;t.fitFreespace=!1,t.infoOn||t.thumbsOn?(le(),oe(),w&&e&&w.centerThis({fit:t.fitImage,marginTop:0,marginBottom:0})):(re(),se(),w&&e&&w.centerThis({fit:t.fitImage,marginTop:f.outerHeight()||0,marginBottom:p.outerHeight()||0})),t.fitFreespace=e},ce=function(){return t.fitFreespace&&h.position().top>=0?f.outerHeight()||0:0},he=function(){return t.fitFreespace&&p.is(":visible")?p.outerHeight()||0:0},ue=function(){w&&w.centerThis({fit:t.fitImage,marginTop:ce(),marginBottom:he()})},pe=function(){t.fitImage?fe():me()},fe=function(){t.hideFitBtn||(v.noresize.hide(),v.resize.showin()),e.fn.centerThis.defaults.enlarge=!t.fitShrinkonly,w.centerThis({fit:!1,marginTop:ce(),marginBottom:he()}),ie(),s("fitImage",!1)},me=function(){t.hideFitBtn||(v.resize.hide(),v.noresize.showin()),e.fn.centerThis.defaults.enlarge=!0,w.centerThis({fit:!0,marginTop:ce(),marginBottom:he()}),ie(),s("fitImage",!0)},ge=function(t){return!(!e(this).parents("[data-custom-scroll]").data("scrolling")&&O)||(t.preventDefault(),e(this).trigger("removeTooltip"),ke(e(this)),!1)},be=function(e){e&&e.length&&(e.stop(),function(e){e.trigger("destroy"),e.find("."+i.video+",."+i.audio).trigger("destroy"),e.find("."+i.share+"-"+i.icon).trigger("destroy"),e.find("."+i.map).trigger("destroy")}(e),e.remove())},ve=function(a){var n;a&&a.length&&(n="number"===t.hash?(parseInt(a,10)||1)-1:function(e){var t,a,n;for(t=0;t<l.length;t++)if(a=l.eq(t).children("img:first"),(n=a.length&&(a.data(i.link)||a.data(i.src)).getFile())&&n===e)return t;return-1}(a))>=0&&n<l.length?(ke(n,!1),t.slideshowAuto=!1):(U(),"ms"==VEND&&setTimeout(function(){e("[data-role=index]").show(),e("[data-custom-scroll]").trigger("adjust")},10))},we=function(a){if("number"===t.hash)e.history.load(a+1);else{var n=R();n&&e.history.load(n)}},ke=function(a,s){if(typeof s===UNDEF&&(s=!0),"number"!=typeof a&&(a=a?function(e){var t;return null==e?t=T:"number"==typeof e?t=Math.minMax(0,e,l.length):(t=l.index(e))<0&&m&&(t=m.index(e)),t}(a):T),d.is(":hidden")&&(w&&w.data("curr")!==a&&be(w),t.transitions?d.fadeIn(t.speed):d.show(),n.hideAllTooltips(),f.children(":first").loadImages()),w&&w.data("curr")===a)!1!==s&&we(a);else{var r,h,u,p=(S=l.eq(a)).attr("href"),g=S.children("img").eq(0);if(g.length){w&&(be(k),(k=w).css({zIndex:0}),setTimeout(function(e){e.trigger("unswipe")},50,k.find("."+i.main)),k.unmousewheel()),(r=d.children("."+i.img).not(w)).length&&r.stop().remove(),w=e("<div>",{id:"img"+a,'class':i.img}).css({zIndex:1,display:"none"}).data({curr:a}).appendTo(d),t.clickBesideForIndex&&(!t.skipIndex||t.level||t.uplink)&&w.on("click",function(t){if(e(t.target).hasClass("img"))return t.preventDefault(),U(),!1}),c.css({opacity:0,display:"block"}).animate({opacity:1}),T=a,W(),O&&s&&we(T);var b=e("<div>",{'class':i.main});if(g.data(i.isother)||!p){h=Math.max(g.data(i.width)||d.width()-160,280),u=Math.max(g.data(i.height)||d.height()-120,200),b.addClass(i.other);var v=g.data(i.content);if(v&&(v=v.trim()).length)b.css({width:h,height:u}).append(v.match(/^https?:\/\//i)?e("<iframe>",{width:"100%",height:"100%",src:v,frameborder:0,allowfullscreen:"allowfullscreen"}):v);else{var S=e("<a>",{href:g.data(i.link),target:"_blank"});e("<img>",{src:g.data(i.src)||g.attr("src")}).appendTo(S);b.append(S).append(e("<p>",{text:o.clickToOpen}))}Ie(b)}else if(g.data(i.isvideo)||g.data(i.isaudio)){if(h=g.data(i.width)||d.width()-160,u=g.data(i.height)||d.height()-120,(x=y)&&(y=clearTimeout(y)),g.data(i.isvideo)){var I=d.width()-40,F=d.height()-40;if(h>I||u>F){var P=Math.min(I/h,F/u);h=Math.round(h*P),u=Math.round(u*P)}b.addClass(i.video)}else h=Math.max(240,g.data(i.width)||0),u=Math.max(180,g.data(i.height)||0),b.addClass(i.audio);b.css({width:h,height:u}).data({ow:h,oh:u}),setTimeout(function(){r=b.addPlayer({src:g.data(i.link),title:t.showVideoTitle?g.attr("alt"):"",poster:g.data(i.poster),play:G,ended:Z,resPath:t.resPath})},t.speed/3),Ie(b)}else{h=g.data(i.width),u=g.data(i.height);var M=e(new Image);b.addClass(i.image).append(M).css({width:h,height:u}).data({ow:h,oh:u}),M.attr({src:p,width:h||"auto",height:u||"auto"}),M[0].complete?(g.data("cached",!0),Ie(b)):M.on("load",function(){g.data("cached",!0),Ie(b)}).prop({src:p})}(r=S.find(".checkbox")).length&&(b.append(r=r.clone()),r.on("click",function(t){t.preventDefault();var a=e(this).hasClass(i.active);return e(this).toggleClass(i.active,!a),l.filter("."+i.active).find("."+i.checkbox).toggleClass(i.active,!a),!1})),Oe(g,a)}}},Te=function(e){e&&e.length&&(e.data(i.kill,!0),setTimeout(function(){e&&e.removeData(i.kill)},500))},ye=function(t){var a=e(t.target);return a.is("."+i.main)||(a=a.parents("."+i.main)),!(a.length&&!a.data(i.kill))||(a.data("scrolling")||(Te(a),t.pageX<a.offset().left+a.outerWidth()/2?V():X()),!1)},xe=function(t,a){t.preventDefault();var n=e(t.target).parents("."+i.img);return n.data(i.kill)||(Te(n),a>0?V():X()),!1},Se=function(t){var a=t.attr("href"),n=t.children("img").eq(0);!a||!n||n.data("cached")||n.data(i.isvideo)||n.data(i.isother)||e("<img>").on("load",function(){n.data("cached",!0)}).attr({src:a})},Ie=function(a){if(c&&c.length&&(t.transitions?c.stop(!0,!1).animate({opacity:0},{duration:100,complete:function(){e(this).hide()}}):c.hide()),O)t.transitions?k&&k.stop(!0,!1).animate({opacity:0},t.speed/2,"linear",function(){be(k)}):be(k),w.children().not("."+i.bottom).remove(),w.append(a);else if(!(a=w.find("."+i.main)).length)return;var n=a.hasClass(i.image);!function(a){t.rightClickProtect&&a.on("contextmenu",function(e){return e.preventDefault(),!1}),setTimeout(function(){t.enableMouseWheel&&w.on("mousewheel",xe),a.addSwipe(X,V),TOUCHENABLED&&!y&&ne(),a.on(TOUCH.END,function(t){return!!(!t.target||"A"===t.target.nodeName||e(t.target).parents("."+i.bottom).length||ae||a.data("scrolling")||a.data("taplength")>=600)||(t.preventDefault(),ne(),!1)}),(l.length>1||!O)&&a.hasClass(i.image)&&t.clickForNext&&a.on("click",ye)},t.speed/2)}(a),setTimeout(function(){t.transitions?w.css({opacity:0,display:"block"}).animate({opacity:1},{duration:t.speed,complete:b?function(){w.css({filter:""})}:null}).centerThis({init:!0,speed:Math.round(.75*t.speed),marginTop:ce(),marginBottom:he(),preScale:n&&t.preScale,animate:n&&t.preScale&&1!==t.preScale,fit:t.fitImage}):w.show().centerThis({init:!0,marginTop:ce(),marginBottom:he(),fit:t.fitImage}),function(e){var t=w.find("nav a."+i.regions+"-icon").eq(0);if(t.length){var a=l.eq(e).find("img:first");t.addRegions(w.find("."+i.main).eq(0),a.data(i.regions))}}(T)},50),O?(T<l.length-1&&Se(l.eq(T+1)),T>0&&Se(l.eq(T-1))):t.slideshowOn&&ee()},Oe=function(a,r){var d,c,h,u,f,g=Math.round(.8*w.width())-30,b=!(a.data(i.isvideo)||a.data(i.isaudio)||a.data(i.isother));O?(p=e("<div>",{'class':i.bottom}).appendTo(w),d=e("<div>",{'class':i.cont}).appendTo(p),typeof r!==UNDEF&&t.showImageNumbers&&d.append('<h4 class="nr"><strong>'+(r+1)+"</strong> / "+l.length+"</h4>"),(h=a.data(i.caption))&&d.append(h),f=a.data(i.src).replace(t.thumbs+"/",t.slides+"/")):(d=p.children("."+i.cont),f=a.attr("src")),c=e("<nav>",{'class':"buttons"}).prependTo(d),d.width()>g&&d.width(g);var v=function(a){a.preventDefault();var n=e(a.target),o=n.data("rel"),l=d.children("."+o),r=l.is(":visible"),c=he(),h=l.outerHeight(!0);if(n.toggleClass(i.active,!r),o===i.map){var u=function(){r||l.children("."+i.mapcont).trigger("adjust")};t.transitions?l.slideToggle("fast",u):(l.toggle(),setTimeout(u,50))}else t.transitions?l.slideToggle("fast"):l.toggle();return w&&t.fitFreespace&&w.centerThis({fit:t.fitImage,marginTop:ce(),marginBottom:c+(r?-h:h)}),s(o+"On",!r),!1},k=function(t,a){var n=e("<div>",{'class':i.panel+" "+t}).data("rel",t);if(a){var o=d.find("."+i.panel).eq(0);n=o.length?n.insertBefore(o):n.appendTo(d)}else n=n.appendTo(d);return n.append(e("<div>",{'class':i.icon})),n},y=function(a){var n=e("<a>",{'class':a+"-"+i.icon}).data("rel",a).appendTo(c);return t.buttonLabels&&n.text(o[a+"Btn"]||a),n.addTooltip(o[a+"Label"]||(t.buttonLabels?"":o[a+"Btn"]||a)),n.on("click",v),n};if(t.shareSlides){var x;t.shareInline?(x=k(i.share,!0),y(i.share),x=e("<div>",{'class':i.shares}).css("min-height","25px").appendTo(x)):(x=e("<a>",{'class':i.share+"-"+i.icon}).appendTo(c),t.buttonLabels&&x.text(o.shareBtn)),O?(u="number"===t.hash?T+1:R(),setTimeout(function(){x.addSocial({hash:u,inline:t.shareInline,buttonLabels:t.shareLabels,title:(a.data(i.caption)||"").stripHTML(!0),image:f})},t.speed/2)):x.addSocial({useHash:!1,inline:t.shareInline,buttonLabels:t.shareLabels,title:(a.data(i.caption)||"").stripHTML(!0),image:f})}var S;!O&&(S=d.children("."+i.comments)).length&&(S.data("rel",i.comments),y(i.comments));for(var I,P=[i.meta,i.map,i.shop,i.print],M=0;M<P.length;M++)I=P[M],null==a.data(I)||I==i.map&&!t.mapOnSlide||(k(I),y(I));if(b){if(t.printOn){var C=e("<a>",{'class':i.print+"-"+i.icon,text:t.buttonLabels?o.printBtn:""});C.addTooltip(o.printLabel),setTimeout(function(){C.on("click",function(e){printImage(a.data(i.link)||f,a.attr("alt")||"",a.data(i.caption)||"")})},t.speed),c.append(C)}if(t.fotomotoOn){var N=e("<a>",{'class':i.fotomoto+"-"+i.icon,text:t.buttonLabels?o.fotomotoBtn:""});N.addTooltip(LOCAL?o.locationWarning:"<h5>Fotomoto</h5>"+o.fotomotoLabel),setTimeout(function(){N.on("click",function(e){typeof FOTOMOTO===UNDEF||LOCAL||FOTOMOTO.API.showWindow(10,a.data(i.link)||f)})},t.speed),c.append(N)}if(h=a.data(i.mostphotos)){h.startsWith("http")||(h="https://www.mostphotos.com/"+h);e("<a>",{href:h,'class':i.mostphotos+"-"+i.icon,text:t.buttonLabels?o.mostphotosBtn:"",target:"_blank"}).appendTo(c).addTooltip("<h5>"+o.mostphotosBtn+"</h5>"+o.mostphotosLabel)}if(a.data(i.regions)){var D=e("<a>",{'class':i.regions+"-"+i.icon});t.buttonLabels&&D.text(o.people),t[i.regions+"On"]&&D.addClass(i.active),D.on("click",function(){s(i.regions+"On",!e(this).hasClass(i.active))}),c.append(D)}}h=a.data(i.link);var L=b&&t.hasOwnProperty("extraSizes")&&f.hasExt("jpg,png,jpeg");if(L||h&&(!b&&t.downloadNonImages||b&&!t.rightClickProtect)){var B=f.getFile(),E=e("<div>"),z=e("<a>",{href:h,'class':i.link+"-"+i.icon,download:"",target:"_blank"});t.buttonLabels&&(t.hasOwnProperty("extraSizes")?z.text(o.download):a.data(i.isoriginal)?z.text(o.original):z.text(o.hiRes)),E.append(e("<h5>",{text:o.download}));var A=e("<div>",{'class':"sizes"}).appendTo(E);if(L)for(var H=t.extraSizes.split(","),M=0;M<H.length;M++)A.append(e("<a>",{href:(O?"":"../")+"dl/"+H[M]+"/"+B,text:H[M],download:""}));h&&(A.append(e("<a>",{href:h,text:a.data(i.isoriginal)?o.original:o.hiRes,download:""})),E.append(e("<input>",{'class':"fullw",type:"text",value:h.fullUrl(),readonly:""})),"download"in z[0]||E.append(e("<small>",{html:o.saveTip}))),z.addTooltip(E,{touchToggle:!0,stay:5e3}),c.append(z)}if(t.imgHook){var U=e("<a>",{'class':i.custom+"-"+i.icon});t.buttonLabels&&t.imgHookBtn&&U.text(t.imgHookBtn),U.on("click",function(o){o.preventDefault();var s=a.data(i.link)||(O?a.data(i.src):a.attr("src")).replace(t.thumbs+"/","");return n.addModal(e(t.imgHook.replace(/\%fileName\%/g,s)),{uid:i.custom,width:t.imgHookWidth||600,title:t.imgHookBtn,defaultButton:"okButton",resizable:!0,savePosition:!0}),!1}),c.append(U)}t.imgHookFn&&e.isFunction(t.imgHookFn)&&t.imgHookFn.call(a),d.children("."+i.panel).each(function(){var n=e(this),o=n.data("rel");if(o&&null!==(h=a.data(o))){if(o===i.map){var s=e("<div>",{'class':i.mapcont}).appendTo(n);if(s.width(d.width()-30),t.mapAll){s.addMap({click:function(){O?ke(this.link):window.location.href=this.link},markers:F,curr:parseInt(O?a.data(i.mapid):m.filter("."+i.active).find("img:first").data(i.mapid),10)})}else{var l=(a.data(i.caption)||"").stripHTML()||a.attr("alt")||T+1+"";s.addMap({map:h,label:l})}setTimeout(function(){s.trigger("adjust")},t.speed)}else if(o===i.shop){var r={};"+"!==h&&(r.options=h),null!==(h=a.data(i.discount))&&(r.discount=h),n.addShop(a.closest("a"),r)}else n.append(h);t[o+"On"]?c.children("a."+o+"-icon").addClass(i.active):n.hide()}}),c.html().length||c.remove(),t.infoOn||p.hide()},Fe=function(){var a=e("<div>",{'class':i.feedback}),s=e("<form>",{id:i.feedback}).appendTo(a);t.directKey&&(s.append('<input type="hidden" name="from" value="'+t.feedbackEmail.replace("|","@")+'">'),s.append('<input type="hidden" name="to" value="'+xDecrypt(t.directKey)+'">'),s.append(e('<p class="email"><label for="email">'+o.yourEmail+'</label><input id="email" name="email" type="email"></p>'))),s.append(e('<p class="subject"><label for="subject">'+o.subject+'</label><input id="subject" name="subject" value="'+t.albumName+(t.relPath.length?"/"+t.relPath:"")+'"></p>')),s.append(e('<p class="message"><label for="message">'+o.message+'</label><textarea id="message" name="message"></textarea></p>')),l.filter(function(){return e(this).children("."+i.active).length}).each(function(t){var a=e(this).find("img").eq(0),n=a.data("src"),l=(a.data(i.isimage)||a.data(i.isother)?n:a.data("link")||"").getFile(),r=O?window.location.href.split("#")[0]+"#"+encodeURIComponent(l):window.location.href.getDir()+e(this).attr("href");s.append(e('<div><aside><img src="'+n+'"></aside><div><a class="remove">&times;</a><label for="img'+t+'">'+l+'</label><input type="hidden" name="file['+(t+1)+']" value="'+r+'"><textarea id="img'+t+'" name="comment['+(t+1)+']" placeholder="'+o.comment+'"></textarea></div></div>'))}),s.find("a.remove").on("click",function(t){return t.preventDefault(),e(this).parents("div").eq(1).remove(),!1});var r=function(a){if(!a||!a.length)return console&&console.log("Submitform Error: Missing form"),!1;var i,s=!1,l=a.find("form").eq(0);window.location.href.split("#")[0];if(t.directKey){if(!(i=l.find("input#email").val()).length||!i.match(/^\S+@\S+[\.][0-9a-z]+$/))return n.addModal(e("<div>",{html:o.emailMissing}),{type:"error"}),!1;if(e.ajax({url:"https://jalbum.net/integration/api/sendmail.json",dataType:"jsonp",data:l.serialize(),success:function(t){!function(t){"Ok"===t.Result?n.addModal(e("<div>",{html:o.messageSent}),{autoFade:1500}):(s=!0,DEBUG&&console&&console.log("Error sending mail: Result="+t.Result+" Cause="+t.Cause),n.addModal(e("<div>",{html:"<h3>"+o.errorSending+'</h3><p class="err">'+t.Result+", "+t.Cause+"</p>"}),{type:"error"}))}(t)}}),s)return!1}else if(t.php)e.ajax({url:resPath+"feddback.php",type:"POST",data:{message:l.serialize(),subject:"Subject of your e-mail"},success:function(e){alert("You data has been successfully e-mailed"),alert("Your server-side script said: "+e)}});else{var r="mailto:"+encodeURIComponent(t.feedbackEmail.replace("|","@"))+"?subject="+encodeURIComponent(l.find("input#subject").val())+"&body=";if((i=l.find("textarea#message").val())&&(r+=encodeURIComponent(i+"\n\n")),l.children("div").each(function(t){r+=encodeURIComponent(t+1+". "+e(this).find("input[type=hidden]").val()+"\n"),(i=e(this).find("textarea").val())&&(r+=encodeURIComponent(i+"\n")),r+=encodeURIComponent("\n")}),r.length>2048)return n.addModal(e("<div>",{html:"<p>"+o.tooLong+"</p>"}),{type:"error"}),!1;window.location.href=r}return!0};return s.on("submit",function(){return r(e("#feedback"))}),n.addModal(a,[{t:o.send,h:r}],{uid:"feedback",enableKeyboard:!1,title:o.sendFeedback,width:480,resizable:!0,savePosition:!0}),!1},Pe=function(){var t=!1,a=l.filter(function(){var a,n=e(this);return!!n.children("."+i.checkbox).hasClass(i.active)&&(n=n.children("img:first"),a=n.data(i.shop),t=!0,!(a&&"+"!==a||n.data(i.discount)))});if(0!==a.length){var s=e("<div>",{'class':i.shopAll}),r=(window.location.href.getDir(),e("<ul>",{'class':i.thumbs}).appendTo(s));a.each(function(){r.append(e("<li>").append(e("<img>",{src:e(this).children("img:first").data("src")})))});e("<div>",{'class':i.shop}).appendTo(s).addShop(a),n.addModal(s,{uid:i.shopAll+"w",title:o.buyNItems.replace("{0}",a.length),width:640,resizable:!0,savePosition:!0,enableKeyboard:!1,blocking:!0,defaultButton:"close"})}else n.addModal(e("<h3>"+o.noItemsSelected+"</h3><p>"+(t?o.nonShoppableItems:o.selectItemsHint)+"</p>"),{type:"warning"})},Me=function(){var a=0;u.children().each(function(){"none"!==e(this).css("display")&&(a+=e(this).outerWidth())}),u.css({marginLeft:-Math.floor(a/2)}),u.children("a").not(v.play).addTooltip({delay:500});var n=e("<div>",{'class':"slideshowdelay",text:v.play.prop("title")});e("<form>").appendTo(n).on("submit",function(e){return e.preventDefault(),ee(),!1}).append(e("<input>",{type:"text",value:t.slideshowDelay/1e3}).focus().on("change",function(){return s("slideshowDelay",Math.round(parseFloat(1e3*e(this).val())||e.fn.turtle.defaults.slideshowDelay)),!0})).append(e("<a>",{'class':"button",text:" "}).on("click",Ue)),v.play.prop("title","").addTooltip(n,{stay:5e3}),TOUCHENABLED||(O?u.hide():C=setTimeout(function(){ie()},1500)),u.on({mouseenter:function(){M=!0,e(this).stop(!0,!1).fadeTo(200,1)},mouseleave:function(){M=!1,e(this).stop(!0,!1).fadeTo(200,.8)}}),d.on("mousemove",function(e){!P&&(B-e.clientY||E-e.clientX)&&(E>=0&&ne(),E=e.clientX,B=e.clientY)})},Ce=function(e){return e.preventDefault(),te(),V(),!1},Ne=function(e){return e.preventDefault(),te(),U(),!1},De=function(){return t.curr&&e.cookie("curr:"+t.albumName+"/"+t.relPath,t.curr,600),!0},Le=function(e){return e.preventDefault(),fe(),!1},Be=function(e){return e.preventDefault(),me(),!1},Ee=function(e){return e.preventDefault(),oe(),!1},ze=function(e){return e.preventDefault(),se(),!1},Ae=function(e){return e.preventDefault(),le(),!1},He=function(e){return e.preventDefault(),re(),!1},Ue=function(a){return a.preventDefault(),O&&t.slideshowFullScreen&&(M=!1,e("html").fullScreen(!0)),ee(),!1},Re=function(e){return e.preventDefault(),te(),!1},je=function(e){return e.preventDefault(),J(),X(),!1};return S?(setTimeout(function(){if(!t.licensee&&(typeof _jaShowAds===UNDEF||_jaShowAds)&&!LOCAL&&!e.cookie("ls")){var a=t.resPath+"/logo.png";e(new Image).load(function(){var t=e("<div>").css({background:"url("+a+") 10px top no-repeat",textAlign:"left",minHeight:"60px",paddingLeft:"90px"}).html("<h4>Turtle skin <small>"+VER+"</small></h4><p>Unlicensed</p>");n.addModal(t,{width:240,defaultButton:!1,autoFade:600}),e.cookie("ls",!0)}).attr("src",a)}},1e3),l=e(this).find("td > a"),function(a){a&&a.length&&(S&&l.length>1&&t.showStart&&function(a){if(a){var n=e("<div>",{'class':i.startShow}).appendTo(a),r=e("<div>",{'class':i.startTxt,width:"auto",text:o.startSlideshow}).appendTo("body"),d=n.width(),c=r.outerWidth();n.append(r),d<c&&r.on({mouseenter:function(){n.stop(!0,!1).animate({width:c},500)},mouseleave:function(){n.stop(!0,!1).animate({width:d},500)}}),n.on({click:function(a){if(O)return a.preventDefault(),t.slideshowFullScreen&&e("html").fullScreen(!0),T===l.length-1?ke(0):ke(),l.length&&setTimeout(ee,1e3),!1;s("slideshowOn",!0,8),window.location.href=l.filter("."+i.active).attr("href")}})}}(a),t.uplink=a.find("."+i.parent+">a").attr("href")||"")}(e(t.header)),r=e("."+i.items),l.length&&function(){var a,n,s=function(){var a=l.index(e(this));a&&e.cookie("curr:"+t.albumName+"/"+t.relPath,a,t.keepPrefs)};l.each(function(){a=e(this),(n=a.find("img").eq(0)).length&&(t.rightClickProtect&&a.on("contextmenu",function(e){return e.preventDefault(),!1}),n.attr("src").endsWith("/"+t.loadImg)&&n.addClass(i.toload),t.markNewDays&&g-parseInt(n.data(i.modified)||0,10)<=t.markNewDays&&a.append(e("<span>",{'class':i.newItem,text:o.newItem})),a.addTooltip({delay:500}),O||l.on("click",s))}),setTimeout(function(){r.loadImages(),setTimeout(function(){r.loadImages()},1200)},100),l.children("."+i.checkbox).on({click:function(t){t.preventDefault();var a=e(this).hasClass(i.active);return e(this).toggleClass(i.active,!a),e(this).parent().hasClass(i.active)&&d.find("."+i.checkbox).toggleClass(i.active,!a),!1},dblclick:function(t){return t.preventDefault(),j(!e(this).hasClass(i.active)),!1}}),e("#"+i.selectAll).on("click",function(e){return e.preventDefault(),j(!0),!1}),e("#"+i.selectNone).on("click",function(e){return e.preventDefault(),j(!1),!1}),e("#"+i.shopAll).on("click",Pe)}(),r.find("."+i.folders).on("click",function(){return e.cookie("curr:"+t.albumName+"/"+t.relPath,null),!0}),e("#"+i.feedback).on("click",Fe),l.length&&((t.mapOnIndex||t.mapAll&&t.mapOnSlide)&&(F=l.collectMarkers({dynamic:O})),t.mapOnIndex&&F.length&&e("#"+i.map+" ."+i.cont).addMap({click:function(){O?ke(this.link):window.location.href=this.link},markers:F,range:999,curr:0}),null===(T=e.cookie("curr:"+t.albumName+"/"+t.relPath))||T>=l.length?(T=0,W(!0)):setTimeout(function(){W()},300),(e.isFunction(t.enableKeyboard)||t.enableKeyboard)&&a.on("keydown",z)),l.length&&O&&function(){l.on("click",ge),d=e("<div>",{'class':i.gallery}).attr("data-role","gallery").appendTo(n),c=e("<div>",{'class':i.wait}).appendTo(d),h=e("<div>",{'class':i.navigation}).appendTo(d),function(){var a,o,s,r,d,c,u,p,g,b,v=0;f=e("<div>",{'class':i.scrollbox}).appendTo(h),d=e("<div>",{'class':"wrap"}).appendTo(f),d=e("<ul>",{'class':i.cont+" "+i.load}).appendTo(d),l.each(function(){a=e(this),(r=a.find("img").eq(0)).length&&(o=e("<a>",{href:NOLINK}).appendTo(e("<li>").appendTo(d)),c||(isNaN(c=parseInt(o.css("width"),10))&&(c=133),isNaN(u=parseInt(o.css("height"),10))&&(u=100)),p=r.attr("width"),g=r.attr("height"),(p>c||g>u)&&(p/c>g/u?(g=Math.round(g*c/p),p=c):(p=Math.round(p*u/g),g=u)),s=e("<img>",{src:r.attr("src"),'class':r.attr("class")}).data({src:r.data("src")}).appendTo(o),p&&g&&s.attr({width:p,height:g}),(b=a.children("."+i.newItem)).length&&o.append(b.clone()),o.addTooltip(a.data("hint")||a.siblings("."+i.caption).html(),{delay:500}))}),(o=d.children("li").first()).length&&(isNaN(v=parseInt(o.css("width"),10))?v=135:v+=(parseInt(o.css("marginLeft"),10)||0)+(parseInt(o.css("marginRight"),10)||0),d.width(v*d.children().length+2)),d.scrollThumbs({enableMouseWheel:t.enableMouseWheel}),(m=f.find("li > a")).on("click",function(){return!e(this).parents("[data-custom-scroll]").data("scrolling")&&(n.hideAllTooltips(),e(this).hasClass(i.active)||(te(),ke(m.index(e(this)))),W(),!1)})}(),u=e("<nav>",{'class':i.controls+" clearfix"}).appendTo(h),v.prev=e("<a>",{'class':i.prev,title:o.previousPicture}).appendTo(u),(!t.skipIndex||t.level||t.uplink)&&(v.up=e("<a>",{'class':i.up,title:t.skipIndex?o.upOneLevel:o.backToIndex}).appendTo(u)),v.noresize=e("<a>",{'class':i.noresize,title:o.oneToOneSize}).appendTo(u),v.resize=e("<a>",{'class':i.resize,title:o.fitToScreen}).appendTo(u),t.hideFitBtn?v.resize.add(v.noresize).hide():(v.resize.togglein(!t.fitImage),v.noresize.togglein(t.fitImage)),v.hideThumbs=e("<a>",{'class':i.hideThumbs,title:o.hideThumbs}).appendTo(u),v.showThumbs=e("<a>",{'class':i.showThumbs,title:o.showThumbs}).appendTo(u),v.showThumbs.togglein(!t.thumbsOn),v.hideThumbs.togglein(t.thumbsOn),v.hideInfo=e("<a>",{'class':i.hideInfo,title:o.hideInfo}).appendTo(u),v.showInfo=e("<a>",{'class':i.showInfo,title:o.showInfo}).appendTo(u),v.showInfo.togglein(!t.infoOn),v.hideInfo.togglein(t.infoOn),v.play=e("<a>",{'class':i.play,title:o.startAutoplay}).appendTo(u),v.pause=e("<a>",{'class':i.pause,title:o.stopAutoplay}).appendTo(u),l.length>1||"nextfolder"===t.afterLast?(v.play.togglein(!t.slideshowAuto),v.pause.togglein(t.slideshowAuto)):v.play.add(v.pause).hide(),v.next=e("<a>",{'class':i.next,title:o.nextPicture}).appendTo(u),v.prev.on("click",Ce),v.up&&v.up.on("click",Ne),v.noresize.on("click",Le),v.resize.on("click",Be),v.hideInfo.on("click",Ee),v.showInfo.on("click",ze),v.hideThumbs.on("click",Ae),v.showThumbs.on("click",He),v.play.on("click",Ue),v.pause.on("click",Re),v.next.on("click",je),Me(),t.thumbsOn||h.css("top",-f.outerHeight()-10),f.on({mouseenter:function(){ie(),P=!0},mouseleave:function(){P=!1}}),"page"!==n.attr("id")&&t.hash&&"no"!==t.hash&&e.history.init(ve);var s=e.cookie("slideshowDelay");t.slideshowAuto||s&&e.isNumeric(s)?(O&&t.slideshowFullScreen&&e("html").fullScreen(!0),s&&e.isNumeric(s)&&(t.slideshowDelay=s),ke(T),ee()):(te(),t.skipIndex&&ke(T)),(e.isFunction(t.enableKeyboard)||t.enableKeyboard)&&a.on("keydown",A)}(),t.showCookiePolicy&&setTimeout(function(){if(!e.cookie("cookiePolicy")){var a=e("<div>",{id:"cookiepolicy"}).appendTo("body"),n=e("<p>",{html:o.cookiePolicyText}).appendTo(a);t.cookiePolicyUrl&&n.append(e("<a>",{text:o.cookiePolicyLearnMore,href:t.cookiePolicyUrl})),n.append(e("<a>",{'class':"btn",text:o.cookiePolicyAgree}).on("click",function(){e("#cookiepolicy").fadeOut(500,function(){e(this).remove()}),e.cookie("cookiePolicy",!0,36e6)})),a.fadeIn(500),setTimeout(function(){e("#cookiepolicy").fadeOut(500,function(){e(this).remove()})},1e3*t.cookiePolicyStay)}},2e3)):(l=e(this),function(){d=e("."+i.gallery),h=e("."+i.navigation),u=e("."+i.controls),w=e("."+i.img),p=e("."+i.bottom),l=w.children("."+i.main),T=0,f=e("."+i.scrollbox),m=f.find("li > a");var n=l.find("img:first");t.mapAll&&(F=m.collectMarkers()),function(){var a=f.find("."+i.cont),n=0;m.addTooltip({delay:500}).each(function(){n+=e(this).outerWidth()}),n+=2*m.length,a.width(n),a.scrollThumbs({enableMouseWheel:t.enableMouseWheel}),m.on("click",function(){return!e(this).parents("[data-custom-scroll]").data("scrolling")}),a.trigger("setactive"),t.thumbsOn||h.css("top",-f.outerHeight()-10)}(),v.prev=u.children("."+i.prev),v.up=u.children("."+i.up),v.noresize=u.children("."+i.noresize),v.resize=u.children("."+i.resize),v.hideInfo=u.children("."+i.hideInfo),v.showInfo=u.children("."+i.showInfo),v.hideThumbs=u.children("."+i.hideThumbs),v.showThumbs=u.children("."+i.showThumbs),v.play=u.children("."+i.play),v.pause=u.children("."+i.pause),v.next=u.children("."+i.next),f.find("."+i.cont+" a").length>1?(v.play.togglein(!t.slideshowAuto),v.pause.togglein(t.slideshowAuto)):v.play.add(v.pause).hide(),t.hideFitBtn&&v.resize.add(v.noresize).hide(),v.up&&v.up.on("click",De),v.noresize.on("click",Le),v.resize.on("click",Be),v.hideInfo.on("click",Ee),v.showInfo.on("click",ze),v.hideThumbs.on("click",Ae),v.showThumbs.on("click",He),v.play.on("click",Ue),v.pause.on("click",Re),v.next.on("click",je),Me(),t.thumbsOn?(v.showThumbs.hide(),v.hideThumbs.showin(),h.css({top:0}).removeClass("hide")):(v.hideThumbs.hide(),v.showThumbs.showin(),h.css({top:-f.outerHeight()-10}).removeClass("hide")),t.infoOn?(v.showInfo.hide(),v.hideInfo.showin(),p.show().css({bottom:0})):(v.hideInfo.hide(),v.showInfo.showin(),p.css({bottom:-p.outerHeight()}).hide()),t.hideFitBtn||(t.fitImage?(v.resize.hide(),v.noresize.showin()):(v.noresize.hide(),v.resize.showin())),n.length&&(l.hasClass(i.image)&&!n[0].complete?(n.on("load",function(){n.data("cached",!0),Ie()}).attr({src:n.attr("src")}),(c=e("<div>",{'class':i.wait}).appendTo(d)).fadeIn()):(n.data("cached",!0),Ie()),Oe(n)),(e.isFunction(t.enableKeyboard)||t.enableKeyboard)&&a.on("keydown",A),t.clickBesideForIndex&&w.on("click",function(t){return!e(t.target).hasClass(i.img)||(U(),!1)})}()),(l.length&&O||!I)&&a.on("resize orientationchange",function(){clearTimeout(N),N=setTimeout(function(){if(!e(".jp-video-full").length){var t=a.width(),n=a.height();t===D&&n===L||(ue(),D=t,L=n)}},100)}),this},e.fn.turtle.defaults={header:"#main header",slides:"slides",thumbs:"thumbs",linkSlides:!1,loadImg:"blank.png",hash:"fileName",resPath:"res/",relPath:"",level:0,skipIndex:!1,showStart:!0,keepPrefs:600,speed:600,controlbarOpacity:0,controlOutOpacity:0,transitions:!0,preScale:.95,slideshowDelay:4e3,slideshowLoop:!1,slideshowAuto:!1,slideshowFullScreen:!1,markNewDays:0,afterLast:"ask",thumbsOn:!1,fitImage:!1,fitShrinkonly:!1,fitFreespace:!0,hideFitBtn:!1,fitPadding:15,borderWidth:10,clickForNext:!0,clickBesideForIndex:!1,rightClickProtect:!1,cookiePolicyStay:8,showImageNumbers:!0,buttonLabels:!1,infoOn:!0,metaOn:!1,mapOn:!1,mapOnIndex:!1,mapOnSlide:!1,mapType:"roadmap",mapZoom:18,mapAll:!1,shopOn:!0,shopGateway:"paypal",shopCurrency:"USD",shareOn:!1,commentOn:!1,printOn:!1,regionsOn:!1,downloadNonImages:!1,enableKeyboard:!0,enableMouseWheel:!0,videoAuto:!1,videoMaximize:!1,videoTitleOn:!1,prioritizeFlash:!1,scrollDuration:1e3},e.fn.turtle.ids={gallery:"gallery",items:"items",folders:"folders",thumbs:"thumbs",navigation:"navigation",scrollbox:"scrollbox",active:"active",parent:"parent",bottom:"bottom",img:"img",main:"main",image:"image",video:"video",audio:"audio",other:"other",wait:"wait",cont:"cont",panel:"panel",icon:"icon",caption:"caption",meta:"meta",map:"map",mapcont:"mapcont",mapid:"mapid",shop:"shop",shopAll:"shopall",discount:"discount",fotomoto:"fotomoto",mostphotos:"mostphotos",share:"share",shares:"shares",print:"print",comments:"comments",link:"link",custom:"custom",poster:"poster",isoriginal:"isoriginal",content:"content",width:"width",height:"height",src:"src",ext:"ext",thumbExt:"thumbext",regions:"regions",isimage:"isimage",isvideo:"isvideo",isaudio:"isaudio",isother:"isother",modified:"modified",startShow:"startshow",startBtn:"startbtn",startTxt:"starttxt",controls:"controls",prev:"prev",next:"next",up:"up",noresize:"noresize",resize:"resize",hideInfo:"hideinfo",showInfo:"showinfo",hideThumbs:"hidethumbs",showThumbs:"showthumbs",play:"play",pause:"pause",newItem:"newlabel",kill:"kill",load:"load",toload:"toload",feedback:"feedback",checkbox:"checkbox",selectAll:"selectall",selectNone:"selectnone"},e.fn.turtle.text={startSlideshow:"Start slideshow",close:"Close",atLastPage:"At last page",atLastPageQuestion:"Where to go next?",startOver:"Start over",backToHome:"Back to home",stop:"Stop",upOneLevel:"Up one level",backToIndex:"Back to index page",previousPicture:"Previous picture",nextPicture:"Next picture",previousFolder:"Previous folder",nextFolder:"Next folder",changeSpeed:"Change speed",oneToOneSize:"1:1 size",fitToScreen:"Fit to screen",showInfo:"Show caption / info",hideInfo:"Hide caption / info",showThumbs:"Show thumbnails",hideThumbs:"Hide thumbnails",startAutoplay:"Start autoplay",stopAutoplay:"Stop autoplay",newItem:"NEW",clickToOpen:"Click to open this document with the associated viewer",commentsBtn:"Comments",commentsLabel:"Add a comment, view other's comments",metaBtn:"Photo data",metaLabel:"Display photograpic (Exif/Iptc) data",mapBtn:"Map",mapLabel:"Show the photo location on map",printBtn:"Print",printLabel:"Print out this photo on your printer",shopBtn:"Buy",shopLabel:"Show options to buy this item",shareBtn:"Share",shareLabel:"Share this photo over social sites",download:"Download",original:"Original",hiRes:"Hi res.",saveTip:"Use Right click -> Save link as... to download",fotomotoBtn:"Buy / Share",fotomotoLabel:"Buy prints or digital files, send free eCard through Fotomoto",mostphotosBtn:"Purchase",mostphotosLabel:"Download this image from <b>mostphotos.com</b>!",people:"People",sendFeedback:"Send feedback",message:"Message",subject:"Subject",comment:"Comment",yourEmail:"Your email address",send:"Send",messageSent:"Message sent",errorSending:"Error sending email!",tooLong:"Text is too long or too many items!",emailMissing:"Email is misssing or wrong!",noItemsSelected:"No items selected!",selectItemsHint:"Select the desired items first!",nonShoppableItems:"The selected items have no or have proprietary shopping options, or different discount rates.",buyNItems:"Buy {0} items",locationWarning:"Works only when uploaded",cookiePolicyText:"This album uses cookies to remember user preferences. By using it, you agree to our use of cookies.",cookiePolicyAgree:"Got it",cookiePolicyLearnMore:"Learn more"}}(jQuery,$(document),$(window),$("body"));